---
title: Presupuesto de la cubierta
author: Vlad
date: `r Sys.Date()`
abstract: >
  Presupuesto de la cubierta y del mirador
keywords: [techos, paredes, aislamiento, alisar]
lang: es
css:
  - style/style.css
header-includes:
  - <link rel="shortcut icon" href="image/html5-favicon.png">
---

```{r document-config, include = F}
options(scipen = 999)
opts_chunk$set(error = F, echo = F)
```

## Cálculo del area de la cubierta

```{r datos-cubierta}
tribble(
  ~parte, ~largo, ~ancho,
  "frontal_principal", 8.87, 5.50,
  "frontal_dormitorio", 2.45, 3.25,
  "trasero_principal_superior", 8.87, 1.85,
  "trasero_principal_inferior", 5.60, 3.15,
  "trasero_terraza_izquierdo", 1.00, 7.30,
  "trasero_terraza_derecho", 1.00, 7.30,
  "trasero_terraza_bajo", 3.80, 0.70,
  "mirador", 4.55, 6.15) |>
  mutate(area = largo * ancho) |>
  gt(rowname_col = "parte") |>
  tab_header(title = "Cálculo del area de la cubierta") |>
  grand_summary_rows(columns = "area", fns = list(total_area = "sum"))
```

## Cálculo de la longitud de las tejas perimetrales

```{r datos-teja}
tribble(
  ~parte, ~largo,
  "cumbrera_principal", 8.87,
  "cumbrera_dormitorio", 2.45,
  "lateral_frontal_principal", 5.50 * 2,
  "lateral_dormitorio", 3.25,
  "lateral_trasero", 3.15 + 1.85,
  "lateral_terraza", 7.30 + 4.10,
  "lateral_mirador", 6.15 * 2) |>
  gt(rowname_col = "parte") |>
  tab_header(title = "Cálculo de la longitud de las tejas perimetrales") |>
  grand_summary_rows(columns = "largo", fns = list(total_longitud = "sum"))
```

## Cálculo de la longitud de la chapas perimetrales

```{r datos-chapa}
tribble(
  ~parte, ~largo, ~ancho,
  "frontal_principal", 8.87, 5.50,
  "frontal_dormitorio", 2.45, 3.25,
  "trasero_principal", 5.60, 3.15 + 1.85,
  "trasero_terraza", 1.00 * 2 + 3.80 + 4.10, 7.30,
  "mirador", 4.55, 6.15 * 2) |>
  mutate(longitud = largo + ancho) |>
  gt(rowname_col = "parte") |>
  tab_header(title = "Cálculo de la longitud de la chapas perimetrales") |>
  grand_summary_rows(columns = "longitud", fns = list(total_longitud = "sum"))
```

## Cálculo de la longitud de los baberos

```{r datos-baberos}
tribble(
  ~parte, ~largo,
  "frontal_dormitorio", 3.25,
  "mirador", 3.80 + 4.90 * 2 + 1.00,
  "chimenea", (0.5 + 0.6) * 2) |>
  gt(rowname_col = "parte") |>
  tab_header(title = "Cálculo de la longitud de los baberos") |>
  grand_summary_rows(columns = "largo", fns = list(total_longitud = "sum"))
```

## Cálculo de la longitud de los canalones y de los bajantes

```{r datos-canalones}
tribble(
  ~concepto, ~parte, ~largo,
  "canalones", "frontal_principal", 8.87,
  "canalones", "frontal_dormitorio", 2.45,
  "canalones", "frontal_hastial", 3.70,
  "canalones", "trasero_principal", 5.60,
  "canalones", "trasero_terraza", 1.00 * 2 + 3.80,
  "canalones", "mirador", 4.55,
  "bajantes", "frontal", 6.70,
  "bajantes", "trasero", 5.00,
  "bajantes", "trasero_inclinado", 4.10,
  "bajantes", "mirador", 2.10) |>
  gt(rowname_col = "parte", groupname_col = "concepto") |>
  tab_header(title = "Cálculo de la longitud de los canalones y de los bajantes") |>
  summary_rows(groups = T,  columns = "largo", fns = list(total = "sum")) |>
  grand_summary_rows(columns = "largo", fns = list(total_longitud = "sum"))
```

## Presupuesto de la cubierta y del mirador

```{r presupuesto-cubierta}
tribble(
  ~concepto, ~cantidad, ~cantidad_vlad, ~precio,
  "Andamio", 160, 160, 18,
  "Línea de vida", 1, 1, 250,
  "Levantado de pizarra", 163, 163, 10,
  "Enfoscado hastial", 6, 6, 50,
  "Canalones y bajantes", 49, 49, 35,
  "Baberos", 20, 20, 25,
  # "Rastrel primario", 139, 136, 12,
  "Telas asfálticas", 139, 139, 22,
  "Rastrel secundario", 139, 139, 21,
  "Teja plana", 139, 139, 45,
  "Enfoscado chimenea", 1, 1, 250,
  "Premarco de ventana", 1, 1, 400,
  "Chapas perimetrales", 65, 65, 18,
  "Tejas perimetrales", 55, 55, 18,
  # Mirador
  "Demolición de tablero", 12, 12, 15,
  "Desmontaje de ventana", 1, 1, 50,
  "Picado de faldón", 10, 10, 15,
  "Picado de muro", 6, 6, 15,
  "Levantado de pavimento", 6, 6, 15,
  "Picado de mortero", 10, 10, 20,
  "Desmontaje de canalón", 1, 1, 30,
  "Camara inferior", 29.5, 29.5, 38,
  "Aislamiento", 30, 30, 8,
  "Ladrillo cara vista", 21.7, 21.7, 75,
  "Cargadero de sardinel", 3, 3, 40,
  "Sardinel de ladrillo", 2.5, 2.5, 75,
  "Camara superior", 17.5, 17.5, 45,
  "Tubo de ventilación", 1, 1, 30,
  "Vierteaguas", 3, 3, 50,
  "Viga 5.5", 2, 2, 350,
  "Viga 4.5", 1, 1, 300,
  "Pilares 3.0", 2, 2, 200,
  "Chapón", 2, 2, 170,
  "Chapa colaborante", 26, 26, 85,
  "Fibrocemento en aleros", 15.5, 15.5, 35,
  "Monocapa en aleros", 15.5, 15.5, 32,
  "Plastón midrador", 10, 10, 30) |>
  mutate (valor = cantidad * precio, valor_vlad = cantidad_vlad * precio) |>
  gt(rowname_col = "concepto") |>
  tab_header(title = "Presupuesto de la cubierta y del mirador") |>
  grand_summary_rows(columns = c("valor", "valor_vlad"), fns = list(total = "sum"))
```

## Pagos realizados y pendientes

```{r datos-pagos}
total_pagado <- tribble(
  ~fecha, ~factura, ~importe,
  "2021-06-15", "Factura 1", 9360.00,
  "2021-07-07", "Factura 2", 9359.79,
  "2021-07-28", "Factura 3", 9359.79,
  "2021-08-05", "Factura 4", 2843.67)
total_pagado |> gt(rowname_col = "fecha") |>
  tab_header(title = "Pagos realizados y pendientes") |>
  grand_summary_rows(columns = "importe", fns = list(total_pagado = "sum"))
```

```{r pendiente-pago}
total_sin_iva <- 32657.50
total_con_iva <- total_sin_iva * 1.1
pendiente_pago <- total_con_iva - sum(total_pagado$importe)
```

Total sin IVA: `r total_sin_iva`

Total con 10% IVA: `r total_con_iva`

Pendiente a pagar: `r pendiente_pago`
