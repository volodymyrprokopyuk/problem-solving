---
title: A minimal Rmd example
author: Volodymyr Prokopyuk
date: `r Sys.Date()`
keywords: [markdown, knitr, literate-programming]
abstract: |
  Markdown and knitr make literate programming in R very convenient
header-includes:
  - <link rel="shortcut icon" href="image/html5-favicon.png"/>
---

# Introduction{#into .heading-class}

:::{.red}
In the above example, the first set of curly braces contains the desired text color, and
the second set of curly braces contains the text to which this color should be applied.
:::

This text is in [**red**]{.red}

```{r first-plot, dev = "svg", fig.cap = "Figure caption"}
ggplot(data.frame(x = c(-15, 15)), aes(x = x, color = "red")) +
  stat_function(fun = function(x) { x^2 })
```

```gv
digraph {
  graph [layout = dot, rankdir = TB]

  node [shape = rectangle]
  rec1 [label = 'Step 1. Wake up']
  rec2 [label = 'Step 2. Write code']
  rec3 [label =  'Step 3. ???']
  rec4 [label = 'Step 4. PROFIT']

  # edge definitions with the node IDs
  rec1 -> rec2 -> rec3 -> rec4
}
```

| I'd like to preserve formatting
|   of these several lines of code,
|     rather than having them in a single line

```{r radius}
x <- 5
```
Area of a circle with the radius `r x` is `r pi * x ^ 2`.

:::{#plg-id}
```{r playground, class.source = c("plg-src", "plg-src2"), class.output = "plg-out"}
(function() { 1 + 2 })()
```
:::

## Section A

[External link](https://postgresql.org){.external-link}

Inline math $\int_a^b x\mathrm{d}x$
<!-- [Block math]{#block-math} -->

::: {#block-math}
:::
Block math

$$\int_a^b x\mathrm{d}x; \sum_{j+1}^N \frac{1}{j^2}$$

### Subsection B

Bigger math example

[]{#eq-1}
$$
d(i,j) = \begin{cases}
\,i & j = 0 \\
\,j & i = 0 \\
\,\min\begin{cases}
d(i-1,j-1) + \mathrm{1}(i\neq j) \\
d(i,j-1) + 1 \\
d(i-1,j) + 1
\end{cases} & i>0,j>0
\end{cases}
$$

Cuadratic roots

$$x=\frac{-b \pm \sqrt{b^2 - 4ac}}{2a}$$

### Subsection C

```{.latex .numberLines #latex-code}
$$
d(i,j) = \begin{cases}
\,i & j = 0 \\
\,j & i = 0 \\
\,\min\begin{cases}
d(i-1,j-1) + \mathrm{1}(i\neq j) \\
d(i,j-1) + 1 \\
d(i-1,j) + 1
\end{cases} & i>0,j>0
\end{cases}
$$
```

## Section D

[Go to code block](#code-block)

[Go to code block]

Here is a footnote [^afootnote] and here is another footnote [^anotherf]

## Header 2

**Markdown** and *knitr* make ***literate programming***\
in R very convenient

> > To create a blockquote, add a > in front of a paragraph. Blockquotes can contain
    multiple paragraphs. Add a > on the blank lines between the paragraphs.
>
> > To create a blockquote, add a > in front of a paragraph. Blockquotes can contain
    multiple paragraphs. Add a > on the blank lines between the paragraphs.

## Header 3

1. One

   To add another element in a list while preserving the continuity of the list, indent
   the element four spaces or one tab, as shown in the following examples.

1. Two
    1. Ten

       > I need to add another paragraph below the second list item.

    1. Eleven
1. Three

# Div section

<div id="code-block"/>

```{.r}
g <- grep("Cause: shooting", homicides)
x <- data.frame(foo = 1:4, bar = c(T, T, F, F))

a <- list(aa=c(3.4, 1), bb=matrix(1:4, 2, 2), cc=matrix(c(T, T, F, T, F, F), 3, 2),
  dd="string here", ee=matrix(c("red", "green", "blue", "yellow")))
is.mat <- rep(F, length(a))
nr <- rep(NA, length(a))
nc <- nr
data.type <- nr
for (i in 1:length(a)) {
  e <- a[[i]]
  if (is.matrix(e)) {
    is.mat[i] <- T
    nr[i] <- nrow(e)
    nc[i] <- ncol(e)
    data.type[i] <- class(as.vector(e))
  }
}
df <- data.frame(name = names(a), is.mat = is.mat, nrow = nr, ncol = nc,
  data.type = data.type)
```


## Code section

:::{.two-col}

:::{.first-col}
R inline code `g <- grep("Cause: shooting", homicides)`{.r}

```sql
CREATE TABLE legal_entity (
    legal_entity_id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
    legal_entity_name text NOT NULL CHECK (legal_entity_name ~ '^[ \w]{3,}$'),
    creation_ts timestamptz NOT NULL DEFAULT current_timestamp);

CREATE TYPE account_type_t AS ENUM ('individual', 'sole_trader', 'sme');
CREATE TYPE account_status_t AS ENUM ('active', 'blocked', 'closed');

CREATE TABLE account (
    account_id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
    legal_entity_id uuid NOT NULL REFERENCES legal_entity (legal_entity_id),
    account_type account_type_t NOT NULL,
    account_status account_status_t NOT NULL,
    creation_ts timestamptz NOT NULL DEFAULT current_timestamp);
```
:::

:::{.second-col}

Zsh inline code ``exec R script.r; echo `pwd`;``{.zsh}

```{.zsh .xnot-numbered}
function map_reduce {
  mkfifo p{i,o}{1,2,3}
  function cleanup { rm -f p{i,o}{1,2,3} }
  trap cleanup INT TERM EXIT

  tr a A < pi1 > po1 &
  sed 's/l/L/' < pi2 > po2 &
  cut -c 2- < pi3 > po3 &

  tee pi{1,2} > pi3 &
  cat po{1,2,3}
}
```
:::
:::

### Subsection E

<!-- ![Face](/home/vlad/.face) -->

<!-- ![Face] -->

[Face]: /home/vlad/.face

### Subsection D

[PostgreSQL](https://www.postgresql.org/)

<https://www.postgresql.org/>

[PostgreSQL]

## Link examples

[PostgreSQL]: https://www.postgresql.org/

[Vlad's emial](mailto:volodymyrprokopyuk@gmial.com)

[Vlad's email]

[Vlad's email]: mailto:volodymyrprokopyuk@gmial.com

<mailto:volodymyrprokopyuk@gmial.com>

[Go to code block]: #code-block

[Reference text][reference-label]

[reference-label]: https://www.postgresql.org/

Table: Syntax elements[]{#syntax-els}

Name | HTML syntax example | Description
:--- | :---: | ---:
Header | `<h1>...</h1>`{.html} | Title
Paragraph | `<p>...</p>`{.html} | Text
If you want table cells to span multiple lines, you can do this as well | If you want table cells to span multiple lines, you can do this as well | If you want table cells to span multiple lines, you can do this as well

Hyphen - compound words

En-dash -- ranges

Em-dash --- substitute

Left | Center  | Right
:--- | :---: | ---:
A | B | C

Here is an ^[Inline footnote directly in the text] to look at

[^afootnote]: A foot note content

    With one more paragraph

[^anotherf]: Another footnote with code block

    ```sql
    SELECT *
    FROM data d;
    ```

Numbered list

a. A
a. B
a. C

Definition list

Term 1
: Lists are frequently used to define terms or concepts, and in Pandoc you can create
  definition lists by following a term with a colon and indenting the start of the
  definition with a tab or at least four spaces. So you can create definition lists like
  this
: Definition 1

Term 2
: Definition 2

Term 1
: Defintion 1
: Defintion 11

Term 2
: Defintion 2

Internal link to [Header 3]

[Go to LaTeX code](#latex-code)

[Go to block math](#block-math)

[Syntax elements](#syntax-els)

[Equiation 1](#eq-1)
