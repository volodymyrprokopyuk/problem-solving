---
title: A minimal Rmd example with ggplot2
author: Volodymyr Prokopyuk
date: "`r Sys.Date()`"
abstract: |
  Markdown and knitr along with ggplot2 make literate programming in R very convenient
keywords: [markdown, knitr, literate-programming, ggplot2]
lang: en
css:
  - style/style.css
header-includes:
  - <link rel="shortcut icon" href="image/html5-favicon.png">
---

```{r document-config, include = F}
library(data.table)
library(huxtable)
opts_chunk$set(echo = F, message = F, warning = F, error = F, dev = "svglite")
```

```{r, eval = F}
d <- data.table(
  Type  = c("Strawberry", "Raspberry", "Plum"),
  Price = c(1.90, 2.10, 1.80)
)
d[3, Type := "Snozberry"] |> invisible()
d[3, c("Type", "Price") := .("Snozberry", 1.7)] |> invisible()
d[, Price := c(1.40, 1.50, 1.60)] |> invisible()
d[, Sugar := c(40, 50, 30)] |> invisible()
d <- rbindlist(list(d, list("Gooseberry", 2.1, 55)))
d[, Sugar := paste0(Sugar, "%")] |> invisible()
# d[, Type := Type |> toupper()] |> invisible()
t <- d |> hux()
caption(t) <- "Jam prices"
width(t) <- 0.3
top_padding(t)[-1, ] <- 3
number_format(t)[, "Price"] <- 2
bold(t)[1, ] <- T
bottom_border(t)[1, ] <- 1
# italic(t)[1, 1] <- T
# italic(t)[1, "Type"] <- T
# italic(t)[grepl("berry", t$Type), 1] <- T
# italic(t)[t$Type %like% "berry", 1] <- T
text_color(t)[nrow(t), ] <- "blue"
text_color(t)[2:3, 1] <- "purple"
background_color(t)[c(T, F), ] <- "gray95"
align(t)[1, ] <- "center"
align(t)[-1, "Sugar"] <- "right"
right_border(t)[, 1] <- brdr(3, "double", "gray")
t
```

```{r}
d <- iris |> data.table()
d <- d[, .SD[1:5], by = Species]
t <- d |> huxtable()
t <- t |>
  insert_row("", "Sepal", "", "Petal", "", after = 0) |>
  merge_cells(1, 2:3) |> merge_cells(1, 4:5)
t[2, 2:5] <- c("Length", "Width")
align(t)[1, ] <- "center"
top_padding(t) <- bottom_padding(t) <- 4
width(t) <- 0.4
col_width(t) <- c(0.6, 0.1, 0.1, 0.1, 0.1)
header_rows(t)[1:2] <- T
header_cols(t)[1] <- T
style_headers(t, bold = T)
t
```
